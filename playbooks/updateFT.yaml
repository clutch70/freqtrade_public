
- name: Full Update Freqtrade
  hosts: genOneBots
  tasks:
    - name: Stop Freqtrade
      command: docker-compose -f /bot/freqtrade/docker-compose.yml down
    - name: Build Freqtrade
      command: docker-compose -f /bot/freqtrade/docker-compose.yml build
    - name: Pull ExchangeProxy
      command: docker-compose -f /bot/freqtrade/docker-compose.yml pull
    - name: Update Bot Config
      script: "/scripts/updateFtConfig.sh"
    - name: Remove Old NFI Short
      become: yes
      file:
        path:
          - /bot/freqtrade/user_data/strategies/NostalgiaForInfinityX.py
          - /bot/freqtrade/user_data/strategies/NostalgiaForInfinityXShort.py
        state: absent
    - name: Download NFI Short
      become: yes
      get_url:
        url: https://raw.githubusercontent.com/clutch70/NostalgiaForInfinity/short/NostalgiaForInfinityX.py
        dest: /bot/freqtrade/user_data/strategies/NostalgiaForInfinityXShort.py
        mode: '0440'
    - name: Download NFI Swing
      become: yes
      get_url:
        url: https://raw.githubusercontent.com/clutch70/NostalgiaForInfinity/swing/NostalgiaForInfinityX.py
        dest: /bot/freqtrade/user_data/strategies/NostalgiaForInfinityXSwing.py
        mode: '0440'
    - name: Remove Old NFI
      file:
        path: /bot/freqtrade/user_data/strategies/NostalgiaForInfinityX.py
    - name: Download NFI Normal
      become: yes
      get_url:
        url: https://raw.githubusercontent.com/clutch70/NostalgiaForInfinity/main/NostalgiaForInfinityX.py
        dest: /bot/freqtrade/user_data/strategies/NostalgiaForInfinityX.py
        mode: '0440'
    - name: Download Kucoin Blacklist
      become: yes
      get_url:
        url: https://raw.githubusercontent.com/clutch70/NostalgiaForInfinity/main/configs/blacklist-kucoin.json
        dest: /bot/freqtrade/user_data/configs/pairlists/blacklist-kucoin.json
        mode: '0440'
    - name: Download Kucoin Whitelist
      become: yes
      get_url:
        url: https://raw.githubusercontent.com/clutch70/NostalgiaForInfinityData/main/kucoin-usdt-static.json
        dest: /bot/freqtrade/user_data/configs/pairlists/kucoin-usdt-static.json
        mode: '0440'
    - name: Start Freqtrade
      command: docker-compose -f /bot/freqtrade/docker-compose.yml up -d